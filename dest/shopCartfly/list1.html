<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<title></title>
		<link rel="stylesheet" href="list.min.css" />
		<link rel="stylesheet" href="main.css" />
		<link rel="stylesheet" href="style/common.css" />
		<link rel="stylesheet" href="style/pagination.css" />
		<script src="jquery.min.js"></script>
		<script src="cookie.js"></script>
		<script src="jquery.pagination.js"></script>

		<style>	
			.header{
				height: 40px;
				width: 900px;
				margin: 0 auto 50px;
			}
			.sp{
				position: absolute;
				top: 200px;
				right: 0;
				width: 80px;
				height: 50px;
			}
			#shopNum{
				text-align: center;
			}
			button{
			width:60px;
			height:30px;
			font-size: 16px;
			margin-top: 10px;
			cursor: pointer;
			border: 1px solid grey;
			text-align: center;
			line-height: 30px;
		}
		</style>
	</head>
	<body>
<header>
<!-- 导航 -->
	  <div class = "nav" id = "nav">
						<i class="iconfont1" id = "iconfont1">&#xea16;</i>
						<i class="iconfont2" id = "iconfont2">&#xe630;</i>
						<a href="shopcar.html"><i class="iconfont3" id = "iconfont3">&#xe78e;</i></a>
						<div id = "cricle" class = "sp"><span id="shopNum">0</span></div>						
						
          <ul class= "nav-ul" id = "nav-ul">
           	<li ><a href="list1.html" id = "shouji">手机</a></li>
           	<li ><a href="list1.html" id = "shengxue">声学</a></li>
           	<li ><a href="list1.html" id = "peijian">配件</a></li>
           	<li ><a href="list1.html" id = "shenghuo">生活</a></li>
           	<li ><a href="list1.html" id = "flyme">Flyme</a></li>
           	<li ><a href="list1.html" id = "fuwu">服务</a></li>
           	<li><a href="list1.html"  id = "zhuanmaidian">专卖店</a></li>
           	<li ><a href="list1.html" id = "shequ">社区</a></li>
           	<li ><a href="list1.html" id = "App">APP下载</a></li>
         </ul>
					 <input id = "input" type="text" placeholder="魅族 16th"/><a href="javescript: ;" class = "search"><i class="iconfont4">&#xe621;</i></a>
					 <!--<input type="text" class = "search" placeholder="魅族 16th"/><a href="javascript: "><i class="iconfont4">&#xe621;</i></a>-->
					 <div class = "re-se">
					 <div class = "triangle"></div>
					 <div class = "re-se-hid">
						 <p><a href="../html/login.html">立即登录</a></p>
						 <p><a href="../html/register.html">立即注册</a></p>
						 <p><a href="javascript: ;">我的订单</a></p>
						 <p><a href="javascript: ;">M码通道</a></p>
					 </div>
					 </div>
		 </div>
<!--图片轮播-->
	<div class = "banner">
			<img src="../img/img (10).min.jpg" />			
		</div>

 <!-- 导航栏隐藏内容 -->
       <div class = "nav-hidden" id = "nav-hidden1">
			<div class = "nav-hid-bottom">
			<a id ="meizunote8" href="../html/details.html"><img src="../img/img (13).min.png" alt="图片加载失败"><p>         魅族 Note8</p><p>  <i class="iconfont5">&#xe6a3;</i> 888</p></a>
			<a href="../html/details.html"><img src="../img/img (15).min.png" alt="图片加载失败"><p>          魅族 16X</p><p><i class="iconfont5">&#xe6a3;</i> 1798</p></a>
			<a href="../html/details.html"><img src="../img/img (16).min.png" alt="图片加载失败"><p>     魅族 V8  高配版</p><p><i class="iconfont5">&#xe6a3;</i> 1098</p></a>
			<a href="../html/details.html"><img src="../img/img (19).min.png" alt="图片加载失败"><p>               魅族8</p><p><i class="iconfont5">&#xe6a3;</i> 1498</p></a>
			<a href="../html/details.html"><img src="../img/img (20).min.png" alt="图片加载失败"><p>         魅族 16th</p><p><i class="iconfont5">&#xe6a3;</i> 2498</p></a>
			<a href="../html/details.html"><img src="../img/img (32).min.jpg" alt="图片加载失败"><p>             魅族 15</p><p><i class="iconfont5">&#xe6a3;</i> 1498</p></a>
			<a href="../html/details.html"><img src="../img/img (18).min.jpg" alt="图片加载失败"><p>              魅蓝 E3</p><p><i class="iconfont5">&#xe6a3;</i> 1499</p></a>
			<a href="../html/details.html"><img src="../img/img (14).min.jpg" alt="图片加载失败"><p>              魅蓝 6</p><p> <i class="iconfont5">&#xe6a3;</i> 799</p></a>
			</div>
		</div>
		<div class = "nav-hidden" id = "nav-hidden2">
			<div class = "nav-hid-bottom">
			<a href="../html/details.html"><img src="../img/img (31).min.jpg" alt="图片加载失败"><p>POP真无线蓝牙耳机</p><p><i class="iconfont5">&#xe6a3;</i> 499</p></a>
			<a href="../html/details.html"><img src="../img/img (34).min.jpg" alt="图片加载失败"><p>魅族 Flow Bass耳机</p><p><i class="iconfont5">&#xe6a3;</i> 399</p></a>
			<a href="../html/details.html"><img src="../img/img (16).min.jpg" alt="图片加载失败"><p>魅族 HoLo激光蓝牙耳机</p><p><i class="iconfont5">&#xe6a3;</i> 499</p></a>
			<a href="../html/details.html"><img src="../img/img (40).min.jpg" alt="图片加载失败"><p>魅族 Ep51蓝牙运动耳机</p><p><i class="iconfont5">&#xe6a3;</i> 129</p></a>
			<a href="../html/details.html"><img src="../img/img (27).min.jpg" alt="图片加载失败"><p>魅族 Ep52蓝牙耳机</p><p><i class="iconfont5">&#xe6a3;</i> 129</p></a>
			<a href="../html/details.html"><img src="../img/img (35).min.jpg" alt="图片加载失败"><p>魅族 LIVE四单元耳机</p><p><i class="iconfont5">&#xe6a3;</i> 1099</p></a>
			<a href="../html/details.html"><img src="../img/img (28).min.jpg" alt="图片加载失败"><p>     魅族 EP-31耳机</p><p><i class="iconfont5">&#xe6a3;</i> 99</p></a>
			<a href="../html/details.html"><img src="../img/img (20).min.jpg" alt="图片加载失败"><p>魅族 EP52蓝牙耳机</p><p><i class="iconfont5">&#xe6a3;</i> 199</p></a>
			</div>
		</div>
		<div class = "nav-hidden" id = "nav-hidden3">
			<div class = "nav-hid-bottom">
			<a href="../html/details.html"><img src="../img/img (13).min.jpg" alt="图片加载失败"><p>       魅族移动电源3</p><p><i class="iconfont5">&#xe6a3;</i> 79</p></a>
			<a href="../html/details.html"><img src="../img/img (38).min.jpg" alt="图片加载失败"><p>       快充电源直配器</p><p><i class="iconfont5">&#xe6a3;</i> 69</p></a>
			<a href="../html/details.html"><img src="../img/img (15).min.jpg" alt="图片加载失败"><p>      魅族无线充电器</p><p><i class="iconfont5">&#xe6a3;</i> 99</p></a>
			<a href="../html/details.html"><img src="../img/img (33).min.jpg" alt="图片加载失败"><p>     魅族2.0数据线</p><p><i class="iconfont5">&#xe6a3;</i> 49</p></a>
			<a href="../html/details.html"><img src="../img/img (41).min.jpg" alt="图片加载失败"><p>魅族 Micro USB数据线</p><p><i class="iconfont5">&#xe6a3;</i> 29</p></a>
			<a href="../html/details.html"><img src="../img/img (5).min.jpg" alt="图片加载失败"><p>魅族 Typ8-C 金属数据线</p><p><i class="iconfont5">&#xe6a3;</i> 39</p></a>
			<a href="../html/details.html"><img src="../img/img (8).min.jpg" alt="图片加载失败"><p>魅族 16th 高强保护膜</p><p><i class="iconfont5">&#xe6a3;</i> 19</p></a>
			<a href="../html/details.html"><img src="../img/img (30).min.jpg" alt="图片加载失败"><p>魅族 16th 亲肤保护膜</p><p><i class="iconfont5">&#xe6a3;</i> 49</p></a>
			</div>
		</div>
		<div class = "nav-hidden" id = "nav-hidden4">
			<div class = "nav-hid-bottom">
			<a href="../html/details.html"><img src="../img/img (6).min.jpg" alt="图片加载失败"><p>魅族盒子-一键找回遥控器</p><p><i class="iconfont5">&#xe6a3;</i> 199</p></a>
			<a href="../html/details.html"><img src="../img/img (39).min.jpg" alt="图片加载失败"><p>魅族路由器 极速版</p><p><i class="iconfont5">&#xe6a3;</i> 99</p></a>
			<a href="../html/details.html"><img src="../img/img (4).min.jpg" alt="图片加载失败"><p>魅族桌面多功能排插</p><p><i class="iconfont5">&#xe6a3;</i> 49</p></a>
			<a href="../html/details.html"><img src="../img/img (17).min.jpg" alt="图片加载失败"><p>Everyday乐游系列</p><p><i class="iconfont5">&#xe6a3;</i> 599</p></a>
			<a href="../html/details.html"><img src="../img/img (7).min.jpg" alt="图片加载失败"><p>魅蓝休闲旅行双肩包</p><p><i class="iconfont5">&#xe6a3;</i> 159</p></a>
			<a href="../html/details.html"><img src="../img/img (19).min.jpg" alt="图片加载失败"><p>             魅蓝腰包</p><p><i class="iconfont5">&#xe6a3;</i> 89</p></a>
			<a href="../html/details.html"><img src="../img/img (21).min.jpg" alt="图片加载失败"><p>  魅蓝数码收纳包</p><p><i class="iconfont5">&#xe6a3;</i> 49</p></a>
			<a href="../html/details.html"><img src="../img/img (22).min.jpg" alt="图片加载失败"><p>             魅蓝旅行包</p><p><i class="iconfont5">&#xe6a3;</i> 199</p></a>
			</div>
		</div>		
		<div class = "nav-hidden" id = "nav-hidden5">
			<div class = "nav-hid-bottom">
			<a href="javascript: ;"><img src="../img/img (3).min.jpg" alt="图片加载失败"></a>
			</div>
        </div>
	
		</header>
<!-- 		<div class="hovering">
			<div class="hovering-left">
				<h2>魅族 Note8</h2>
			</div>
			<div class = "hovering-right">
				<a href="javascript: ;">概述</a><span>|</span>
				<a href="javascript: ;">参数</a><span>|</span>
				<a href="javascript: ;">常见问题</a>
			</div>
 		</div>
 -->	
 <section>
      <div id = "de1">
          <div id = "leftt">
              <p>手机</p>
          </div>
          <div  id = "rightt">
              <ul id = "listUl">
                  <!-- <li>推荐</li>
                  <li>新品</li>
                  <li>价格</li> -->
              </ul>
          </div>
      </div>
      <div id = co1 >
        <!-- <div id = "co1-con">
             <img src="../img/img (13).min.png" alt=""> 
            <p>魅族X8</p>
            <p>2.18最高直降300|骁龙710</p>
            <p><i class="iconfont5">&#xe6a3;</i>1298</p> 
        </div> -->
        <!-- <div id = "co1-con"></div>
        <div id = "co1-con"></div>
           -->
	  </div>
	  <div id = "last">


		<div class="nav2 clearfix">
			<!--<span>小米手机</span>-->
		</div>		
		<ul class="shoplist clearfix" style="position: relative;">
			<!--<li>
				<a href="page.html">
					<img src="img/1.jpg" alt="" />
					<p>小米1</p>
					<p>890</p>
				</a>
				<button>加入购物车</button>
			</li>-->
		</ul>
		<div class="M-box" style="margin-left: 300px;"></div>



	  </div>
 </section>
	    <footer class="ten">
	    	<div>
	    		<div class="left">
	    			
	    			<div id= "yi">
	    				<img src="../img/2c69bf7c-2d29-4fd4-852e-0aa497f36f51.min.png" alt="" />
	    				<div id="change"><p>全场顺丰包邮</p></div>
	    			</div>
	    			<div id= "yi">
	    				<img src="../img/img (12).min.png" alt="" />
	    				<div><p>城市次日送达</p></div>
	    			</div>
	    			<div id= "yi">
	    				<img src="../img/img (23).min.png" alt="" />
	    				<div><p>7天无理由退货</p></div>
	    			</div>
	    			<div id= "yi">
	    				<img src="../img/img (26).min.png" alt="" />
	    				<div><p>15天换货保障</p></div>
	    			</div>
	    			<div id= "yi">
	    				<img src="../img/img (24).min.png" alt="" />
	    				<div><p>一年免修保障</p></div>
	    			</div>
	    			<div id= "yi">
	    				<img src="../img/img (30).min.png" alt="" />
	    				<div><p>全城上门快修</p></div>
	    			</div>
	
	
	    		</div>
	    		<div id="right">
	    			<div id="text1"><p>周一至周五 7:30-24:00</p></div>
	    			<div id="text2"><p>400-788-3333</p></div>
	    			<div id="text3"><p>在线客服</p></div>
	    		</div>	
	    	</div>
	    	<div id='bottom'>
	           <a href="javascript： ；">了解魅族</a>
	           <span>|</span>
	           <a href="javascript： ；">加入我们</a>
	           <span>|</span>   
	           <a href="javascript： ；"> 联系我们</a>   
	           <span>|</span>   
	           <a href="javascript： ；">Flyme</a>   
	           <span>|</span>   
	           <a href="javascript： ；">魅族社区</a>   
	           <span>|</span>   
	           <a href="javascript： ；">天猫旗舰店</a>   
	           <span>|</span>   
	           <a href="javascript： ；">问题反馈</a>   
	           <span>|</span>   
	           <a style="width:140px" href="javascript： ；">线上销售授权名单公示</a>   
	           <span>|</span>   
	           <a style="width:120px" href="javascript： ；">出版物经营许可证</a>   
	           <span>|</span>   
	           <a style="width:90px" href="javascript： ；">&nbsp;&nbsp;简体中文</a> 
	    	<p class="l-text"> ©2018 Meizu Telecom Equipment Co., Ltd. All rights reserved. &nbsp;&nbsp;&nbsp;&nbsp;   粤ICP备13003602号&nbsp;&nbsp; 合字B2-20170010&nbsp;&nbsp; 营业执照 &nbsp;&nbsp;法律声明 &nbsp;&nbsp;<i class="iconfont8">&#xe620;</i>粤公网安备 &nbsp;&nbsp;44049102496009 号</p>
	    	<i class="iconfont9">&#xe61b;</i>
			<i class="iconfont10">&#xe602;</i>
			<i class="iconfont11">&#xe601;</i>
	    	</div>
	    </footer>
	</body>
</html>
<script src="jquery-1.11.1.js"></script>
<script src = "list.min.js"></script>
<script src = "index.min.js"></script>
<script src="details.min.js"></script>				
<script type="text/javascript">
	var index = 1;//页码
	var pageNum = 4;//每页的数据量

    var deff = $.ajax({
            type:"get",
            url:"data.json",
            async:true
        })  
     deff.done( function(data){

        var conStr = "";
        for(var attr in data){
            console.log(data[attr]);

              var pro = data[attr];
              conStr += `<li>
								<a href="../html/details.html?pid=${ pro.id }">
									<img src="img/${pro.src}" alt="" />
									<p>${ pro.name }</p>
									<p><i class="iconfont5">&#xe6a3;</i>${ pro.price }</p>
								</a>
								<button data-pid='${ pro.id }' data-pname='${ pro.name }' data-src= '${ pro.src }' data-price='${ pro.price }'>购买</button>
							</li>`;

        }
        $(".shoplist").html(conStr);

    })

	


	//添加购物车功能  将当前购买的商品信息存入到cookie中
	$(".shoplist").on("click","button",function(){
		//确定起始点对象和结束点对象
		var startObj = $(this);
		var endObj = $(".sp");
		//获取按钮对应的大图的路径
		var src = $(this).data("src") ;
		//调用抛物线方法
		$.fnInit( startObj , endObj ).fnMove( src );
		
		var flag = true;//假设值为true时  向数组中push对象
		var json = {};//用于存放当前购买的商品信息
		var arr = [];//用于存放当前购买的多个商品信息
		//获取商品的信息并存放到json中
		json = {
			"id" : $(this).data("pid"),
			"name":$(this).data("pname"),
			"src":$(this).data("src"),
			"price":$(this).data("price"),
			"count" : 1
		}
		
		//获取cookie中的数据 长度如果不为0  说明返回的是一个数组 也就是原cookie数据
		var brr = getCookie( "shoplist" );
		if( brr.length != 0 ){
			arr = brr;
			//判断当前购买的商品 是否存在于cookie中  arr
			//如果存在，就将count值++
			for ( var i = 0 ; i < arr.length ; i++ ) {
				if( json.id == arr[i].id ){
					arr[i].count++;
					flag = false;
					break;
				}
			}
		}
		if( flag ){
			// 将json对象存入到数组中
			arr.push( json );
		}
		
		//将数组存放到cookie中
		setCookie( "shoplist" , JSON.stringify( arr ) );
		
		console.log( document.cookie )
	})
	
	//定义一个函数 功能获取商品总数量
	getCount();
	function getCount(){
		var count = 0;
		var brr = getCookie("shoplist");
		if( brr.length != 0 ){
			for( var i = 0 ; i < brr.length ; i++ ){
				count += brr[i].count;
			}
		}
		$("#shopNum").html( count );
	}
	
	//编写插件 实现抛物线功能
	$.extend({
		fnInit : function(startObj , endObj){
			//起始点
			this.startPoint = {
				x : startObj.offset().left + startObj.width()/2,
				y : startObj.offset().top
			}
			//结束点
			this.endPoint = {
				x : endObj.offset().left + endObj.width()/2,
				y : endObj.offset().top
			}
			//最高的
			this.topPoint = {
				x : this.endPoint.x - 100,
				y : this.endPoint.y - 50
			}
			//确定抛物线系数
			this.a = ((this.startPoint.y - this.endPoint.y) * (this.startPoint.x - this.topPoint.x) - (this.startPoint.y - this.topPoint.y) * (this.startPoint.x - this.endPoint.x)) / ((this.startPoint.x * this.startPoint.x - this.endPoint.x * this.endPoint.x) * (this.startPoint.x - this.topPoint.x)-(this.startPoint.x * this.startPoint.x - this.topPoint.x * this.topPoint.x) * (this.startPoint.x - this.endPoint.x));  
								
			this.b = ((this.endPoint.y - this.startPoint.y) - this.a * (this.endPoint.x * this.endPoint.x - this.startPoint.x * this.startPoint.x)) / (this.endPoint.x - this.startPoint.x);  
								
			this.c = this.startPoint.y - this.a * this.startPoint.x * this.startPoint.x - this.b * this.startPoint.x;
			console.log( this.a , this.b , this.c )
			
			return this;
		},
		fnMove : function(src){ //src指向点击按钮对应的大图的路径
			var $img = $("<img>");
			$img.attr( "src" , "img/" + src );
			$img.appendTo( $("body") );
			//获取图片的起始点坐标
			var x = this.startPoint.x;
			var y = this.startPoint.y;
			//设置图片的样式
			$img.css({
				width:30,
				height:30,
				position:"absolute",
				left : x,
				top : y
			})
			var timer = setInterval( function(){
				x = x + 10,
				y = this.a * x * x + this.b * x + this.c;
				if( x < this.endPoint.x ){
					$img.css({
						left : x,
						top : y
					})
				}else{
					clearInterval( timer );
					$img.remove();
					getCount();
				}
			}.bind(this),10 )
		}
	})
</script>